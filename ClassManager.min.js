!function(){"use strict";function d(){s=5,l=11,c=5,h()}function u(){s=4,l=12,c=6,h()}function i(){console.log("validateAddChild")}function m(){localStorage.setItem("cls",JSON.stringify(t)),localStorage.setItem("pref",JSON.stringify(a))}function y(e){t.push(e),m()}function f(e){return e?"M"===e?"male":"female":""}function g(e){var t=["January","February","March","April","May","June","July","August","September","October","November","December"],n=e.split("-"),a=n[2]+" "+t[n[1]-1];return a}function b(e){var t=(e+1)%s||s,n=Math.ceil((e+1)/s);return{posX:t-1,posY:n-1}}function v(){for(var e=document.getElementsByClassName("class-list")[0],n=document.createDocumentFragment(),a=0,r=t.length;r>a;a++){var o=document.createElement("li"),s=document.createElement("span"),d="translate("+b(a).posX*l+"em, "+b(a).posY*c+"em)";o.setAttribute("id",t[a].id),o.textContent=t[a].name,o.className=f(t[a].gender),s.textContent="("+g(t[a].dob)+")",o.appendChild(s),o.style.webkitTransform=d,o.style.MozTransform=d,o.style.mstransform=d,o.style.OTransform=d,o.style.transform=d,n.appendChild(o)}e.innerHTML="",e.appendChild(n)}function h(){for(var e=0,n=t.length;n>e;e++){var a=document.getElementById(t[e].id),r="translate("+b(e).posX*l+"em, "+b(e).posY*c+"em)";a.style.webkitTransform=r,a.style.MozTransform=r,a.style.mstransform=r,a.style.OTransform=r,a.style.transform=r}}function S(){t.sort(function(){return.5-Math.random()}),h()}function M(){switch(location.hash){case"#sort-by-name-asc":t=t.sortBy("name");break;case"#sort-by-name-desc":t=t.sortBy("name"),t.reverse();break;case"#sort-by-age-asc":t=t.sortBy("dob"),t.reverse();break;case"#sort-by-age-desc":t=t.sortBy("dob");break;case"#sort-by-gender":t=t.sortBy("gender");break;case"#random":S();break;case"#compact":d();break;case"#spaced":u()}h(),m()}function B(){var e=Math.floor(Math.random()*o.length),t=document.querySelectorAll("li:not(.faded)")[e];t.className+=" faded",o.splice(e,1)}function w(){var e=setInterval(function(){B(),1===o.length&&(clearInterval(e),document.querySelectorAll("li:not(.faded)")[0].className+=" selected")},100)}function k(){v(),M()}function I(){var e=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],t=["January","February","March","April","May","June","July","August","September","October","November","December"],n=new Date,a=e[n.getDay()]+", "+n.getDate()+" "+t[n.getMonth()]+" "+n.getFullYear();document.getElementById("date-today").textContent=a}Array.prototype.sortBy=function(e){return this.slice(0).sort(function(t,n){return t[e]>n[e]?1:t[e]<n[e]?-1:0})};var e=localStorage.getItem("cls"),t=e?JSON.parse(e):[],n=localStorage.getItem("pref"),a=n?JSON.parse(n):{},r=!0,o=t.slice(),s=a.cols||5,l=a.gapX||11,c=a.gapY||5;document.forms.addChild.onsubmit=function(){var e=document.forms.addChild,t={id:+new Date,name:e.name.value,gender:e.gender.value,dob:e.dob.value,tags:e.tags.value};i(),r&&(y(t),h())},document.getElementById("sort-by").onchange=function(){window.location="#"+this.value},document.getElementById("pick-one").addEventListener("click",w),document.getElementById("reset").addEventListener("click",k),window.onhashchange=M,I(),v(),M()}();